<!-- Navbar Superior -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <!-- Botón para mostrar/ocultar sidebar -->
        <button 
          class="btn btn-outline-light me-3" 
          type="button" 
          (click)="alternarSidebar()">
          <i class="bi bi-list"></i>
        </button>
        
        <a class="navbar-brand" href="#">Dashboard Admin</a>
        
        <div class="navbar-nav ms-auto">
          <span class="navbar-text text-light me-3">Administrador</span>
          <button class="btn btn-outline-light btn-sm">
            <i class="bi bi-box-arrow-right"></i> Salir
          </button>
        </div>
      </div>
    </nav>

    <!-- Contenedor Principal -->
    <div class="container-fluid" style="margin-top: 56px;">
      <div class="row">
        
        <!-- Sidebar Izquierdo -->
        <nav 
          [class]="obtenerClaseSidebar()" 
          style="min-height: calc(100vh - 56px); transition: all 0.3s;">
          
          <div class="d-flex flex-column p-3 bg-light border-end" style="height: 100%;">
            <h5 class="mb-4 text-center">Gestión de Usuarios</h5>
            
            <ul class="nav nav-pills flex-column mb-auto">
              <!-- Opción Lista de Usuarios -->
              <li class="nav-item mb-2">
                <button 
                  [class]="obtenerClaseBotonMenu('lista')"
                  (click)="cambiarVentana('lista')">
                  <i class="bi bi-people me-2"></i>
                  Lista de Usuarios
                </button>
              </li>
              
              <!-- Opción Crear Usuario -->
              <li class="nav-item mb-2">
                <button 
                  [class]="obtenerClaseBotonMenu('crear')"
                  (click)="cambiarVentana('crear')">
                  <i class="bi bi-person-plus me-2"></i>
                  Crear Usuario
                </button>
              </li>
              
              <!-- Opción Reportes -->
              <li class="nav-item mb-2">
                <button 
                  [class]="obtenerClaseBotonMenu('reportes')"
                  (click)="cambiarVentana('reportes')">
                  <i class="bi bi-graph-up me-2"></i>
                  Reportes
                </button>
              </li>
              
              <!-- Opción Configuración -->
              <li class="nav-item mb-2">
                <button 
                  [class]="obtenerClaseBotonMenu('configuracion')"
                  (click)="cambiarVentana('configuracion')">
                  <i class="bi bi-gear me-2"></i>
                  Configuración
                </button>
              </li>
            </ul>
          </div>
        </nav>

        <!-- Área de Contenido Principal -->
        <main [class]="obtenerClaseContenidoPrincipal()">
          <div class="p-4">
            
            <!-- Encabezado de la ventana actual -->
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2>{{ obtenerTituloVentanaActual() }}</h2>
              <small class="text-muted">{{ obtenerFechaActual() }}</small>
            </div>

            <!-- Contenido según ventana seleccionada -->
            <div class="row">
              <div class="col-12">
                
                <!-- Vista Lista de Usuarios -->
                <div *ngIf="ventanaActual === 'lista'" class="card">
                  <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Usuarios Registrados</h5>
                    <button class="btn btn-primary btn-sm" (click)="cambiarVentana('crear')">
                      <i class="bi bi-plus-circle me-1"></i>Nuevo Usuario
                    </button>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-striped table-hover">
                        <thead class="table-dark">
                          <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let usuario of obtenerListaUsuarios()">
                            <td>{{ usuario.id }}</td>
                            <td>{{ usuario.nombre }}</td>
                            <td>{{ usuario.email }}</td>
                            <td>
                              <span [class]="'badge ' + obtenerClaseRol(usuario.rol)">
                                {{ usuario.rol }}
                              </span>
                            </td>
                            <td>
                              <span [class]="'badge ' + obtenerClaseEstado(usuario.activo)">
                                {{ usuario.activo ? 'Activo' : 'Inactivo' }}
                              </span>
                            </td>
                            <td>
                              <button class="btn btn-sm btn-outline-primary me-1" title="Editar">
                                <i class="bi bi-pencil"></i>
                              </button>
                              <button class="btn btn-sm btn-outline-danger" title="Eliminar">
                                <i class="bi bi-trash"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- Vista Crear Usuario -->
                <div *ngIf="ventanaActual === 'crear'" class="card">
                  <div class="card-header">
                    <h5 class="mb-0">Crear Nuevo Usuario</h5>
                  </div>
                  <div class="card-body">
                    <form class="row g-3">
                      <div class="col-md-6">
                        <label class="form-label">Nombre Completo</label>
                        <input type="text" class="form-control" placeholder="Ingrese el nombre completo">
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" placeholder="usuario@ejemplo.com">
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Contraseña</label>
                        <input type="password" class="form-control">
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Rol</label>
                        <select class="form-select">
                          <option selected>Seleccionar rol...</option>
                          <option value="admin">Administrador</option>
                          <option value="editor">Editor</option>
                          <option value="usuario">Usuario</option>
                        </select>
                      </div>
                      <div class="col-12">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" checked>
                          <label class="form-check-label">Usuario activo</label>
                        </div>
                      </div>
                      <div class="col-12">
                        <button type="submit" class="btn btn-success me-2">
                          <i class="bi bi-check-circle me-1"></i>Crear Usuario
                        </button>
                        <button type="button" class="btn btn-secondary" (click)="cambiarVentana('lista')">
                          <i class="bi bi-arrow-left me-1"></i>Volver a Lista
                        </button>
                      </div>
                    </form>
                  </div>
                </div>

                <!-- Vista Reportes -->
                <div ngIf="ventanaActual === 'reportes'" class="card">
                  <div class="card-header">
                    <h5 class="mb-0">Reportes y Estadísticas</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-3">
                        <div class="card text-white bg-primary">
                          <div class="card-body">
                            <h5 class="card-title">Total Usuarios</h5>
                            <h2>{{ obtenerListaUsuarios().length }}</h2>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="card text-white bg-success">
                          <div class="card-body">
                            <h5 class="card-title">Usuarios Activos</h5>
                            <h2>{{ contarUsuariosActivos() }}</h2>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="card text-white bg-warning">
                          <div class="card-body">
                            <h5 class="card-title">Administradores</h5>
                            <h2>{{ contarAdministradores() }}</h2>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="card text-white bg-danger">
                          <div class="card-body">
                            <h5 class="card-title">Usuarios Inactivos</h5>
                            <h2>{{ contarUsuariosInactivos() }}</h2>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Vista Configuración -->
                @if (ventanaActual === 'configuracion') {
                    <div class="card">
                      <div class="card-header">
                        <h5 class="mb-0">Configuración del Sistema</h5>
                      </div>
                      <div class="card-body">
                        <p class="text-muted">Aquí podrás configurar las opciones del sistema de gestión de usuarios.</p>
                        <div class="alert alert-info">
                          <i class="bi bi-info-circle me-2"></i>
                          Esta sección estará disponible próximamente para configurar parámetros del sistema.
                        </div>
                      </div>
                    </div>
                  }
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>